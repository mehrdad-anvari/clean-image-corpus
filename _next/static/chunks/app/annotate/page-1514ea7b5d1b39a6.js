(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{1006:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>r,Q6:()=>o,QH:()=>s,oc:()=>i});let a=(0,n(1990).Z0)({name:"annotationSettings",initialState:{rectClasses:{0:{name:"default",color:[255,255,255]}},rectMinEdgeSize:.02},reducers:{addRectClass:(e,t)=>{e.rectClasses[t.payload.id]=t.payload.attrs},deleteRectClass:(e,t)=>{delete e.rectClasses[t.payload]},setSettings:(e,t)=>({...e,...t.payload})}}),{addRectClass:o,deleteRectClass:s,setSettings:i}=a.actions,r=a.reducer},1783:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>S,Bb:()=>p,C5:()=>v,HD:()=>z,I_:()=>I,Kg:()=>x,M:()=>h,Mu:()=>w,O8:()=>A,OE:()=>l,U_:()=>u,_y:()=>b,aA:()=>f,cE:()=>y,cr:()=>d,eU:()=>N,fw:()=>m,nj:()=>g,rY:()=>r,v0:()=>j,xJ:()=>c,xh:()=>C});var a=n(1990),o=n(7355);let s={selectedAnnotation:-1,selectedVertex:-1,hoveringAnnotation:-1,hoveringVertex:-1,annotations:{},annotationsHistory:{0:{annotations:{},length:0}},historyIndex:0,selectedTool:"SELECT",width:640,height:640,selectedClassID:0,lastIndex:0,historyLastIndex:0,zoom:800},i=(0,a.Z0)({name:"canvas",initialState:s,reducers:{loadAnnotations:(e,t)=>{e.lastIndex=t.payload.length;let n={};t.payload.forEach((e,t)=>{n[t]={object:e}}),e.annotations=n,e.annotationsHistory={0:{annotations:n,length:t.payload.length}}},startDrawRect:(e,t)=>{let n=t.payload.classID,a=t.payload.mousePosition,o={class_id:n,x1:a.x,y1:a.y,x2:a.x,y2:a.y};e.annotations[e.lastIndex]={object:o},e.lastIndex+=1},resetHistory:e=>{e.annotationsHistory={0:{annotations:{},length:0}},e.historyIndex=0},saveAnnotationsHistory:e=>{e.annotationsHistory[e.historyIndex+1]={annotations:e.annotations,length:e.lastIndex},e.historyLastIndex=e.historyIndex+1,e.historyIndex+=1,console.log("saving state")},goForwardHistory:e=>{e.historyIndex<e.historyLastIndex&&(e.historyIndex+=1,e.annotations=e.annotationsHistory[e.historyIndex].annotations,e.lastIndex=e.annotationsHistory[e.historyIndex].length)},goBackwardHistory:e=>{e.historyIndex>0&&(e.historyIndex-=1,e.annotations=e.annotationsHistory[e.historyIndex].annotations,e.lastIndex=e.annotationsHistory[e.historyIndex].length)},updateDrawRect:(e,t)=>{let n=e.annotations[e.lastIndex-1].object,a=t.payload;e.annotations[e.lastIndex-1].object={class_id:n.class_id,x1:n.x1,y1:n.y1,x2:a.x,y2:a.y}},updateRect:(e,t)=>{e.annotations[t.payload.Index].object=t.payload.updatedRect},updateHoveringAnnotation:(e,t)=>{e.hoveringAnnotation=-1;let n=t.payload;for(let[t,a]of Object.entries(e.annotations))if(o.A.containPoint(a.object,n.x,n.y)){e.hoveringAnnotation=Number(t);break}},updateHoveringVertex:(e,t)=>{let n=t.payload;if(e.selectedAnnotation>-1){let t=o.A.findNearestVertex(e.annotations[e.selectedAnnotation].object,n.x,n.y);null!=t&&(e.hoveringVertex=t)}},selectAnnotationFromHover:e=>{e.selectedAnnotation=e.hoveringAnnotation},selectVertexFromHover:e=>{e.selectedVertex=e.hoveringVertex},resetSelectedAnnotation:e=>{e.selectedAnnotation=-1},setSelectedAnnotation:(e,t)=>{e.selectedAnnotation=t.payload},resetSelectedVertex:e=>{e.selectedVertex=-1},moveVertex:(e,t)=>{let n=t.payload;if(e.selectedAnnotation>-1&&e.selectedVertex>-1){let t=o.A.moveVertex(e.annotations[e.selectedAnnotation].object,n.x,n.y,e.selectedVertex);void 0!=t&&(e.annotations[e.selectedAnnotation].object=t)}},setSelectedTool:(e,t)=>{e.selectedTool=t.payload},setCanvasSize:(e,t)=>{e.width=t.payload.width,e.height=t.payload.height},setSelectedClassID:(e,t)=>{e.selectedClassID=t.payload},removeAnnotation:(e,t)=>{delete e.annotations[t.payload]},resetCanvasState:()=>s}}),{startDrawRect:r,updateDrawRect:l,updateHoveringAnnotation:c,updateHoveringVertex:d,goBackwardHistory:u,goForwardHistory:x,selectAnnotationFromHover:h,selectVertexFromHover:m,setSelectedTool:b,moveVertex:y,resetCanvasState:g,resetSelectedAnnotation:f,resetSelectedVertex:p,saveAnnotationsHistory:w,setCanvasSize:v,setSelectedClassID:j,loadAnnotations:z,resetHistory:N,setSelectedAnnotation:C,removeAnnotation:A,updateRect:I}=i.actions,S=i.reducer},4065:(e,t,n)=>{"use strict";async function a(e,t){let n=await e.getFileHandle("settings.json",{create:!0}),a=await n.createWritable();await a.write(JSON.stringify(t,null,2)),await a.close(),console.log("Saved ".concat(t," to settings.json file."))}async function o(e){try{let t=await e.getFileHandle("settings.json",{create:!1}),n=await t.getFile(),a=await n.text();return JSON.parse(a)}catch(e){return console.log("Error in loading the settings.json",e),null}}n.d(t,{D:()=>a,M:()=>o})},4362:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var a=n(5155),o=n(2115);function s(e){var t,n;let{cards:o,onSelect:s,handlePrevious:i,handleNext:r,imagesLen:l}=e,c=null!==(n=null===(t=o[2])||void 0===t?void 0:t[0])&&void 0!==n?n:0;return(0,a.jsxs)("aside",{className:"w-full md:w-64 p-4 bg-zinc-900 border-r border-zinc-700 overflow-y-auto h-[90vh] max-h-screen shadow-inner flex flex-col gap-4 text-zinc-100",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("button",{onClick:i,disabled:0===c,className:"px-3 py-1 text-sm font-medium rounded border transition duration-150 ".concat(0===c?"bg-zinc-700 text-zinc-500 border-zinc-600 cursor-not-allowed":"bg-zinc-800 hover:bg-zinc-700 text-blue-400 border-blue-500"),children:"← Previous"}),(0,a.jsx)("button",{onClick:r,disabled:c===l-1,className:"px-3 py-1 text-sm font-medium rounded border transition duration-150 ".concat(c===l-1?"bg-zinc-700 text-zinc-500 border-zinc-600 cursor-not-allowed":"bg-zinc-800 hover:bg-zinc-700 text-blue-400 border-blue-500"),children:"Next →"})]}),(0,a.jsxs)("div",{className:"text-center text-xs text-zinc-400",children:["Image ",(0,a.jsx)("span",{className:"font-semibold text-zinc-100",children:c+1})," of"," ",(0,a.jsx)("span",{className:"font-semibold text-zinc-100",children:l})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3 justify-items-center",children:o.map((e,t)=>{let[n,o]=e;return o?(0,a.jsx)("img",{src:o,alt:"Image ".concat(n),onClick:()=>s(t),className:"object-cover cursor-pointer rounded-md border transition-all duration-200 ".concat(2===t?"w-48 h-32 border-blue-500 shadow-lg opacity-100":"w-40 h-28 border-zinc-600 opacity-60 hover:opacity-90 hover:border-blue-400")},t):(0,a.jsx)("div",{className:"w-40 h-28 bg-zinc-700 text-zinc-400 flex items-center justify-center rounded-md",children:"Empty"},t)})})]})}function i(e){let t=e.currentTarget.getBoundingClientRect(),n=e.currentTarget.width,a=e.currentTarget.height;return{x:(e.clientX-t.left)/n,y:(e.clientY-t.top)/a}}var r=n(1783);function l(e,t,n){if("keydown"===e.type||"keyup"===e.type){var a,o,s;a=e,o=0,s=n,"keydown"===a.type&&(a.ctrlKey&&"key"in a&&"z"===a.key&&s((0,r.U_)()),a.ctrlKey&&"key"in a&&"y"===a.key&&s((0,r.Kg)()));return}if("mousemove"===e.type||"mousedown"===e.type||"mouseup"===e.type)switch(t.selectedTool){case"SELECT":!function(e,t,n){switch(e.type){case"mousedown":if(-1!=t.hoveringAnnotation)n((0,r._y)("EDIT_RECT")),n((0,r.M)());else{let a=i(e);n((0,r._y)("DRAW_RECT")),n((0,r.rY)({classID:t.selectedClassID,mousePosition:a}))}break;case"mouseup":break;case"mousemove":let a=i(e);n((0,r.xJ)(a)),n((0,r.cr)(a))}}(e,t,n);break;case"EDIT_RECT":!function(e,t,n){switch(e.type){case"mousedown":-1!=t.hoveringVertex?n((0,r.fw)()):(n((0,r.Bb)()),-1!=t.hoveringAnnotation?n((0,r.M)()):(n((0,r._y)("SELECT")),n((0,r.aA)())));break;case"mouseup":-1!=t.selectedVertex&&(n((0,r.Mu)()),n((0,r.Bb)()),n((0,r._y)("SELECT")));break;case"mousemove":let a=i(e);n((0,r.xJ)(a)),n((0,r.cr)(a)),-1!=t.selectedVertex&&n((0,r.cE)(a))}}(e,t,n);break;case"DRAW_RECT":!function(e,t,n){switch(e.type){case"mousedown":let a=i(e);n((0,r.rY)({classID:t.selectedClassID,mousePosition:a}));break;case"mouseup":n((0,r.Mu)()),n((0,r._y)("SELECT"));break;case"mousemove":let o=i(e);n((0,r.OE)(o))}}(e,t,n)}}var c=n(7355),d=n(9007),u=n(4540);function x(e){let{imageSrc:t}=e,n=(0,o.useRef)(null),s=(0,d.j)(),i=(0,u.d4)(e=>e.canvas),x=(0,u.d4)(e=>e.settings);return(0,o.useEffect)(()=>{if(!t||!n.current)return;let e=new Image;e.src=t;let a=()=>{let t=Math.max(e.width,e.height)/i.zoom,n=e.width/t,a=e.height/t;s((0,r.C5)({width:n,height:a}))};return e.addEventListener("load",a),()=>{e.removeEventListener("load",a)}},[i,t]),(0,o.useEffect)(()=>{t&&n.current&&!function(e,t,n,a){let o=new Image;o.src=t,e.width=n.width,e.height=n.height;let s=e.getContext("2d");s.clearRect(0,0,e.width,e.height),s.drawImage(o,0,0,e.width,e.height);let i=null;for(let[t,o]of Object.entries(n.annotations)){let s=Number(t),r=o.object,l=a.rectClasses[o.object.class_id].color;r&&(i=s===n.selectedAnnotation?n.hoveringVertex:null,"DRAW_RECT"==n.selectedTool?c.A.draw(r,e,s===n.selectedAnnotation,null,l):"SELECT"==n.selectedTool?c.A.draw(r,e,s===n.hoveringAnnotation||s===n.selectedAnnotation,null,l):c.A.draw(r,e,s===n.hoveringAnnotation||s===n.selectedAnnotation,i,l))}}(n.current,t,i,x)},[t,i]),(0,a.jsx)("div",{className:"relative w-full h-full flex items-center justify-center bg-zinc-950",children:(0,a.jsx)("canvas",{ref:n,onMouseDown:e=>{l(e,i,s)},onMouseMove:e=>{l(e,i,s)},onMouseUp:e=>{l(e,i,s)},onKeyDown:e=>{l(e,i,s)},tabIndex:0,className:"outline-none border border-zinc-700  shadow-md bg-zinc-900 focus:ring-1 focus:ring-blue-500 transition duration-150"})})}function h(){var e;let t=(0,d.j)(),n=(0,u.d4)(e=>e.canvas.selectedAnnotation),s=(0,u.d4)(e=>e.canvas.annotations),i=(0,u.d4)(e=>e.settings),l=Object.entries(s),c=-1!==n?null===(e=s[n])||void 0===e?void 0:e.object:null,[x,h]=(0,o.useState)(c?{...c}:null);(0,o.useEffect)(()=>{var e;h(c=-1!==n?null===(e=s[n])||void 0===e?void 0:e.object:null)},[n,s]);let m=e=>{t((0,r.xh)(e)),h({...s[e].object})},b=(e,t)=>{x&&h({...x,[e]:t})};return(0,a.jsxs)("div",{className:"w-full h-full bg-zinc-900 border-l border-zinc-700 text-zinc-100 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-col border-b border-zinc-700 flex-grow min-h-0",children:[(0,a.jsxs)("div",{className:"bg-zinc-800 px-4 py-2 text-sm font-medium text-zinc-200",children:["Annotations (",l.length,")"]}),(0,a.jsx)("div",{className:"overflow-y-auto flex-grow divide-y divide-zinc-700",children:0===l.length?(0,a.jsx)("p",{className:"p-3 text-sm text-zinc-500",children:"No annotations yet."}):l.map(e=>{let[o]=e,s=Number(o),i=s===n;return(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 text-sm cursor-pointer ".concat(i?"bg-zinc-800 border-l-4 border-blue-500":"hover:bg-zinc-800"),onClick:()=>m(s),children:[(0,a.jsxs)("span",{className:"text-zinc-300 font-medium",children:["#",s]}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),t((0,r.O8)(s)),t((0,r.Mu)()),s===n&&(t((0,r.xh)(-1)),h(null))},className:"text-red-400 hover:underline text-xs",children:"Remove"})]},o)})})]}),(0,a.jsxs)("div",{className:"border-t border-zinc-700 ",children:[(0,a.jsx)("div",{className:"bg-zinc-800 px-4 py-2 text-sm font-medium text-zinc-200",children:c?"Selected Annotation #".concat(n):"No annotation selected"}),c&&x&&(0,a.jsxs)("div",{className:"p-4 flex flex-col gap-2 text-xs bg-zinc-900",children:[["class_id","x1","y1","x2","y2"].map(e=>(0,a.jsxs)("label",{className:"flex justify-between items-center gap-2",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:e}),(0,a.jsx)("input",{type:"number",value:x[e],onChange:t=>b(e,parseFloat(t.target.value)),className:"bg-zinc-800 text-zinc-100 px-2 py-1 text-right w-24 border border-zinc-600 focus:outline-none focus:ring focus:ring-blue-500"})]},e)),(0,a.jsx)("button",{onClick:()=>{null!==n&&x&&i.rectClasses[x.class_id]&&(t((0,r.I_)({updatedRect:x,Index:n})),t((0,r.v0)(x.class_id)),t((0,r.Mu)()))},className:"mt-2 w-full py-1 bg-blue-600 text-white hover:bg-blue-700 transition",children:"Save Changes"})]})]})]})}function m(e){let{onLoadImages:t,onSync:n,onSettings:o,onExport:s}=e;return(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("button",{onClick:o,className:"bg-zinc-800 text-zinc-100 px-4 py-2 rounded-md border border-zinc-600 hover:bg-zinc-700 hover:border-blue-500 transition",children:"⚙️ Settings"}),(0,a.jsx)("button",{onClick:t,className:"bg-zinc-800 text-zinc-100 px-4 py-2 rounded-md border border-zinc-600 hover:bg-zinc-700 hover:border-blue-500 transition",children:"\uD83D\uDCC1 Load Images"}),(0,a.jsx)("button",{onClick:n,className:"bg-zinc-800 text-zinc-100 px-4 py-2 rounded-md border border-zinc-600 hover:bg-zinc-700 hover:border-blue-500 transition",children:"\uD83D\uDD04 Sync Images"}),(0,a.jsx)("button",{onClick:s,className:"bg-zinc-800 text-zinc-100 px-4 py-2 rounded-md border border-zinc-600 hover:bg-zinc-700 hover:border-blue-500 transition",children:"\uD83D\uDCBE Export YOLO"})]})}var b=n(4383),y=n(5373),g=n(1006),f=n(4065);async function p(e){let t=await e.getDirectoryHandle("yolo",{create:!0}),n=await e.getDirectoryHandle("annotations");if(n&&t)for await(let[e]of n.entries()){let a=await n.getFileHandle(e),o=await a.getFile(),s=JSON.parse(await o.text()).annotations,i=await t.getFileHandle(function(e){let t=e.lastIndexOf(".");return -1===t?"".concat(e,".txt"):"".concat(e.substring(0,t),".txt")}(e),{create:!0}),r=await i.createWritable(),l=[];s.forEach(e=>{let t=(e.x1+e.x2)*.5,n=(e.y1+e.y2)*.5,a=Math.abs(e.x2-e.x1),o=Math.abs(e.y2-e.y1);l.push("".concat(e.class_id," ").concat(t," ").concat(n," ").concat(a," ").concat(o))}),await r.write(l.join("\n")+"\n"),await r.close()}}let w=()=>[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())],v=e=>{let{color:t=[255,255,255]}=e;return(0,a.jsx)("div",{className:"w-5 h-5 rounded shadow-sm",style:{backgroundColor:"rgb(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")")}})},j=e=>{let{isOpen:t,onClose:n,settings:s}=e,i=(0,d.j)(),[r,l]=(0,o.useState)(""),[c,u]=(0,o.useState)(w()),[x,h]=(0,o.useState)(Object.keys(s.rectClasses).length),[m,b]=(0,o.useState)("");if(!t)return null;let y=e=>{i((0,g.QH)(e))};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50",children:(0,a.jsx)("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-2xl w-full max-w-xl border border-zinc-700",children:(0,a.jsxs)("div",{className:"p-2 sm:p-4 text-zinc-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Rectangle Classes"}),m&&(0,a.jsx)("p",{className:"text-red-400 mb-2",children:m}),(0,a.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Class Name",className:"bg-zinc-800 text-white border border-zinc-600 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("input",{type:"color",value:"#".concat(c.map(e=>e.toString(16).padStart(2,"0")).join("")),onChange:e=>{u(e.target.value.slice(1).match(/.{1,2}/g).map(e=>parseInt(e,16)))},onClick:()=>{u(w())},className:"cursor-pointer border border-zinc-600 rounded-md w-10 h-10"})]}),(0,a.jsx)("button",{onClick:()=>{if(""===r.trim()){b("Class name cannot be empty.");return}let e=Object.values(s.rectClasses).some(e=>e.name===r),t=Object.values(s.rectClasses).some(e=>e.color[0]===c[0]&&e.color[1]===c[1]&&e.color[2]===c[2]);if(e){b("Class name already exists.");return}if(t){b("Class color already exists.");return}i((0,g.Q6)({id:x,attrs:{name:r,color:c}})),l(""),u(w()),h(x+1),b("")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition",children:"Add Class"})]}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-72 border-t border-zinc-700 pt-4",children:(0,a.jsx)("ul",{className:"space-y-3",children:Object.entries(s.rectClasses).map(e=>{let[t,{name:n,color:o}]=e;return(0,a.jsxs)("li",{className:"flex items-center justify-between gap-3 text-sm bg-zinc-800 p-2 rounded-md shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(v,{color:o}),(0,a.jsxs)("span",{className:"text-zinc-400",children:["#",t]}),(0,a.jsx)("span",{className:"text-zinc-100",children:n})]}),(0,a.jsx)("button",{onClick:()=>y(Number(t)),className:"bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded-md transition",children:"Remove"})]},t)})})}),(0,a.jsx)("button",{className:"mt-6 w-full bg-zinc-700 hover:bg-zinc-600 text-white py-2 rounded-md transition",onClick:n,children:"Close"})]})})})};function z(){let e=(0,d.j)(),t=(0,u.d4)(e=>e.canvas),n=(0,u.d4)(e=>e.settings),{db:i,imagesDirHandle:l,rootDirHandle:c,annotationsDirHandle:g}=(0,y.B)(),w=[null,null,null],[v,z]=(0,o.useState)([w,w,w,w,w]),[N,C]=(0,o.useState)(0),[A,I]=(0,o.useState)(!1),[S,k]=(0,o.useState)(0),E=()=>{I(!A),c&&(0,f.D)(c,n)};function M(e){let t=e.lastIndexOf(".");return -1===t?"".concat(e,".json"):"".concat(e.substring(0,t),".json")}async function D(){if(!g||!v[2][1])return;let e=v[2][2];if(!e)return;let n=M(e.name),a=[];for(let e=0;e<t.lastIndex;e++){if(void 0==t.annotations[e])continue;let n=t.annotations[e].object;a.push(n)}try{let e=await g.getFileHandle(n,{create:!0}),t=await e.createWritable();await t.write(JSON.stringify({name:n,annotations:a,labels:[]},null,2)),await t.close()}catch(e){console.error("Error saving annotations:",e)}}async function H(t){let n=t[2];if(null==n||null==g)return;let a=M(n.name);try{let t=await g.getFileHandle(a),n=await t.getFile(),o=await n.text(),s=JSON.parse(o);e((0,r.HD)(s.annotations))}catch(t){console.warn('Annotation file "'.concat(a,'" could not load. error: "').concat(t,'"')),e((0,r.HD)([])),e((0,r.eU)())}}async function _(){if(!i)return;let e=await (0,b.AK)(i);C(e),await V(0,e,i,l,0)}async function T(){l&&c&&i&&(await (0,b.kP)(l,i),await (0,b.wZ)(i,c),C(await (0,b.AK)(i)))}async function O(){try{c&&await p(c)}catch(e){console.log("Error in exporting annotation to yolo format, error: ",e)}}async function V(t,n,a,o,s){if(!a||!o)return;let i=s+t;if(i<0||i>=n)return;let l=Math.floor(2.5),c=Math.max(0,i-l),d=Math.min(n,i+l+1)-c,u=Math.max(0,l-i),x=await (0,b.kg)(o,a,c,d);if(!x)return;let h=[...Array(u).fill(w),...x,...Array(5-d-u).fill(w)];z(h),e((0,r.nj)()),await H(h[2]),k(i)}async function R(){await D(),await V(-1,N,i,l,S)}async function L(){await D(),await V(1,N,i,l,S)}async function F(e){let t=Math.floor(2.5);await D(),await V(e-t,N,i,l,S)}return(0,a.jsxs)("div",{className:"flex flex-col h-screen bg-zinc-950 text-zinc-100 h-full",children:[(0,a.jsx)("header",{className:"bg-zinc-900 border-b border-zinc-700 px-4 py-3 shadow-md",children:(0,a.jsx)(m,{onLoadImages:_,onSync:T,onSettings:E,onExport:O})}),(0,a.jsxs)("div",{className:"flex flex-row flex-grow overflow-hidden h-full",children:[(0,a.jsx)("aside",{className:"bg-zinc-900 border-r border-zinc-700 w-full h-full md:w-64 overflow-y-auto",children:(0,a.jsx)(s,{cards:v,onSelect:F,handlePrevious:R,handleNext:L,imagesLen:N})}),(0,a.jsx)("main",{className:"flex-1 flex justify-center items-center h-full bg-zinc-950 p-4 overflow-hidden",children:(0,a.jsx)("div",{className:"max-w-full max-h-full",children:(0,a.jsx)(x,{imageSrc:v[2][1]})})}),(0,a.jsx)("aside",{className:"h-full w-full md:w-64 bg-zinc-900 border-l border-zinc-700",children:(0,a.jsx)(h,{})}),(0,a.jsx)(j,{isOpen:A,onClose:E,settings:n})]})]})}},6410:(e,t,n)=>{Promise.resolve().then(n.bind(n,4362))},7355:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});class a{static moveVertex(e,t,n,a){if(null==a)return;let o={...e};switch(a){case 1:o.x1=t,o.y1=n;break;case 2:o.x2=t,o.y1=n;break;case 3:o.x2=t,o.y2=n;break;case 4:o.x1=t,o.y2=n}return o}static findNearestVertex(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.02,o=new Map([[1,{x:e.x1,y:e.y1}],[2,{x:e.x2,y:e.y1}],[3,{x:e.x2,y:e.y2}],[4,{x:e.x1,y:e.y2}]]),s=null,i=1/0;return o.forEach((e,o)=>{let r=Math.hypot(e.x-t,e.y-n);r<a&&r<i&&(i=r,s=o)}),s}static draw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[255,0,0],s=t.width,i=t.height,r=t.getContext("2d");if(null==r)return;r.strokeStyle="rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", 1)");let l=e.x1*s,c=e.x2*s,d=e.y1*i,u=e.y2*i;if(r.beginPath(),r.lineWidth=1,r.fillStyle="rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", 0.9)"),r.rect(l-2,d-2,4,4),r.rect(l-2,u-2,4,4),r.rect(c-2,d-2,4,4),r.rect(c-2,u-2,4,4),a){let t=this.giveVertex(e,a);t&&r.rect(t.x*s-5,t.y*i-5,10,10)}r.fill(),r.rect(l,d,c-l,u-d),n?(r.fillStyle="rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", 0.2)"),r.fill()):r.stroke()}static containPoint(e,t,n){let a=Math.min(e.x1,e.x2),o=Math.max(e.x1,e.x2),s=Math.min(e.y1,e.y2),i=Math.max(e.y1,e.y2);return!!(a<t)&&!!(t<o)&&!!(s<n)&&!!(n<i)}static giveVertex(e,t){switch(t){case 1:return{x:e.x1,y:e.y1};case 2:return{x:e.x2,y:e.y1};case 3:return{x:e.x2,y:e.y2};case 4:return{x:e.x1,y:e.y2};default:return null}}static longestDimSize(e){return Math.max(Math.abs(e.y2-e.y1),Math.abs(e.x2-e.x1))}}let o=a},9007:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var a=n(4540);let o=a.wA.withTypes();a.d4.withTypes()}},e=>{var t=t=>e(e.s=t);e.O(0,[635,299,441,684,358],()=>t(6410)),_N_E=e.O()}]);